openapi: 3.1.0
info:
  title: SkillSpark API
  description: API for the SkillSpark application
  contact:
    name: SkillSpark Team
  version: 1.0.0
servers:
  - url: http://localhost:8080
    description: Local development server
paths:
  /api/v1/greet/{name}:
    get:
      tags:
        - Examples
      summary: Get a greeting
      description: Returns a personalized greeting message
      operationId: get-greeting
      parameters:
        - name: name
          in: path
          description: Name to greet
          required: true
          schema:
            type: string
            description: Name to greet
            maxLength: 30
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetGreetingOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/guardians:
    post:
      tags:
        - Guardians
      summary: Create a new guardian
      description: Creates a new guardian
      operationId: post-guardian
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateGuardianInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guardian'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/guardians/{id}:
    get:
      tags:
        - Guardians
      summary: Get a guardian by id
      description: Returns a guardian by id
      operationId: get-guardian-by-id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guardian'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    put:
      tags:
        - Guardians
      summary: Update a guardian by id
      description: Updates a guardian by id
      operationId: update-guardian
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateGuardianInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guardian'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    delete:
      tags:
        - Guardians
      summary: Delete a guardian by id
      description: Deletes a guardian by id
      operationId: delete-guardian
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guardian'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/guardians/child/{child_id}:
    get:
      tags:
        - Guardians
      summary: Get a guardian by child id
      description: Returns a guardian by child id
      operationId: get-guardian-by-child-id
      parameters:
        - name: child_id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Guardian'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/health:
    get:
      tags:
        - Health
      summary: Health check
      description: Check if the API is running and healthy
      operationId: health-check
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/locations:
    post:
      tags:
        - Locations
      summary: Create a new location
      description: Creates a new location
      operationId: post-location
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLocationInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/locations/{id}:
    get:
      tags:
        - Locations
      summary: Get a location by id
      description: Returns a location by id
      operationId: get-location-by-id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/schools:
    get:
      tags:
        - Schools
      summary: Get all schools
      description: Returns all schools
      operationId: get-all-schools
      parameters:
        - name: page
          in: query
          explode: false
          schema:
            type: integer
            format: int64
            default: 1
            minimum: 1
        - name: limit
          in: query
          explode: false
          schema:
            type: integer
            format: int64
            default: 100
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: List of all schools in the database
                items:
                  $ref: '#/components/schemas/School'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/users:
    get:
      tags:
        - Users
      summary: List all users
      description: Returns a list of all registered users
      operationId: list-users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListUsersOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    post:
      tags:
        - Users
      summary: Create a new user
      description: Creates a new user account with the provided information
      operationId: create-user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/users/{id}:
    get:
      tags:
        - Users
      summary: Get user by ID
      description: Returns a single user by their ID
      operationId: get-user
      parameters:
        - name: id
          in: path
          description: User ID
          required: true
          schema:
            type: string
            description: User ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    delete:
      tags:
        - Users
      summary: Delete a user
      description: Deletes a user account by ID
      operationId: delete-user
      parameters:
        - name: id
          in: path
          description: User ID to delete
          required: true
          schema:
            type: string
            description: User ID to delete
      responses:
        "204":
          description: No Content
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
components:
  schemas:
    CreateGuardianInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/CreateGuardianInputBody.json
          readOnly: true
        user_id:
          type: string
          description: The associated user ID of the guardian
      required:
        - user_id
    CreateLocationInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/CreateLocationInputBody.json
          readOnly: true
        address_line1:
          type: string
          description: Primary address line of the location
          minLength: 5
          maxLength: 200
        address_line2:
          type: string
          description: Secondary address line of the location
          minLength: 5
          maxLength: 200
        country:
          type: string
          description: Country of the location
          minLength: 2
          maxLength: 100
        district:
          type: string
          description: District of the location
          minLength: 2
          maxLength: 100
        latitude:
          type: number
          description: Latitude of the location
          format: double
          minimum: -90
          maximum: 90
        longitude:
          type: number
          description: Longitude of the location
          format: double
          minimum: -180
          maximum: 180
        postal_code:
          type: string
          description: Postal code of the location
          minLength: 3
          maxLength: 20
        province:
          type: string
          description: Province/State of the location
          minLength: 2
          maxLength: 100
        subdistrict:
          type: string
          description: Subdistrict of the location
          minLength: 2
          maxLength: 100
      required:
        - latitude
        - longitude
        - address_line1
        - address_line2
        - subdistrict
        - district
        - province
        - postal_code
        - country
    CreateUserInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/CreateUserInputBody.json
          readOnly: true
        email:
          type: string
          description: User email address
          format: email
        full_name:
          type: string
          description: Full name (optional)
        username:
          type: string
          description: Username
          minLength: 3
          maxLength: 50
      required:
        - email
        - username
    ErrorDetail:
      type: object
      additionalProperties: false
      properties:
        location:
          type: string
          description: Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'
        message:
          type: string
          description: Error message text
        value:
          description: The value at the given location
    ErrorModel:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/ErrorModel.json
          readOnly: true
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem.
          examples:
            - Property foo is required but is missing.
        errors:
          type: array
          description: Optional list of individual error details
          items:
            $ref: '#/components/schemas/ErrorDetail'
        instance:
          type: string
          description: A URI reference that identifies the specific occurrence of the problem.
          format: uri
          examples:
            - https://example.com/error-log/abc123
        status:
          type: integer
          description: HTTP status code
          format: int64
          examples:
            - 400
        title:
          type: string
          description: A short, human-readable summary of the problem type. This value should not change between occurrences of the error.
          examples:
            - Bad Request
        type:
          type: string
          description: A URI reference to human-readable documentation for the error.
          format: uri
          default: about:blank
          examples:
            - https://example.com/errors/example
    GetGreetingOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/GetGreetingOutputBody.json
          readOnly: true
        message:
          type: string
          description: Greeting message
        timestamp:
          type: string
          description: Server timestamp
      required:
        - message
        - timestamp
    Guardian:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/Guardian.json
          readOnly: true
        created_at:
          type: string
          format: date-time
        id:
          type: string
        updated_at:
          type: string
          format: date-time
        user_id:
          type: string
      required:
        - id
        - user_id
        - created_at
        - updated_at
    HealthOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/HealthOutputBody.json
          readOnly: true
        status:
          type: string
          description: Health status
          examples:
            - ok
        version:
          type: string
          description: API version
          examples:
            - 1.0.0
      required:
        - status
        - version
    Item:
      type: object
      additionalProperties: false
      properties:
        email:
          type: string
        id:
          type: string
        username:
          type: string
      required:
        - id
        - email
        - username
    ListUsersOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/ListUsersOutputBody.json
          readOnly: true
        total:
          type: integer
          format: int64
        users:
          type: array
          items:
            $ref: '#/components/schemas/Item'
      required:
        - users
        - total
    Location:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/Location.json
          readOnly: true
        address_line1:
          type: string
        address_line2:
          type: string
        country:
          type: string
        created_at:
          type: string
          format: date-time
        district:
          type: string
        id:
          type: string
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        postal_code:
          type: string
        province:
          type: string
        subdistrict:
          type: string
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - latitude
        - longitude
        - address_line1
        - address_line2
        - subdistrict
        - district
        - province
        - postal_code
        - country
        - created_at
        - updated_at
    School:
      type: object
      additionalProperties: false
      properties:
        created_at:
          type: string
          format: date-time
        id:
          type: string
        location_id:
          type: string
        name:
          type: string
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - name
        - location_id
        - created_at
        - updated_at
    UpdateGuardianInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/UpdateGuardianInputBody.json
          readOnly: true
        user_id:
          type: string
          description: The associated user ID of the guardian
      required:
        - user_id
    UserOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/UserOutputBody.json
          readOnly: true
        email:
          type: string
          description: User email
        full_name:
          type: string
          description: Full name
        id:
          type: string
          description: User ID
        username:
          type: string
          description: Username
      required:
        - id
        - email
        - username
