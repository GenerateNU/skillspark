openapi: 3.1.0
info:
  title: SkillSpark API
  description: API for the SkillSpark application
  contact:
    name: SkillSpark Team
  version: 1.0.0
servers:
  - url: http://localhost:8080
    description: Local development server
paths:
  /api/v1/event-occurrences:
    get:
      tags:
        - Event Occurrences
      summary: Get all event occurrences
      description: Returns a list of all event occurrences in the database
      operationId: get-all-event-occurrences
      parameters:
        - name: page
          in: query
          explode: false
          schema:
            type: integer
            format: int64
            default: 1
            minimum: 1
        - name: limit
          in: query
          explode: false
          schema:
            type: integer
            format: int64
            default: 100
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: List of all event occurrences in the database
                items:
                  $ref: '#/components/schemas/EventOccurrence'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    post:
      tags:
        - Event Occurrences
      summary: Create an event occurrence
      description: Creates a new event occurrence in the database
      operationId: post-event-occurrence
      requestBody:
        content:
          application/json:
            schema:
              description: New event occurrence to add
              $ref: '#/components/schemas/CreateEventOccurrenceInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: Created event occurrence
                $ref: '#/components/schemas/EventOccurrence'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/event-occurrences/{id}:
    get:
      tags:
        - Event Occurrences
      summary: Get an event occurrence by ID
      description: Returns an event occurrence that matches the ID
      operationId: get-event-occurrences-by-id
      parameters:
        - name: id
          in: path
          description: ID of an event occurrence
          required: true
          schema:
            type: string
            description: ID of an event occurrence
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                description: Event occurrence in the database that matches the ID
                $ref: '#/components/schemas/EventOccurrence'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/events/{event_id}/event-occurrences/:
    get:
      tags:
        - Event Occurrences
      summary: Get event occurrences by event ID
      description: Returns event occurrences that match the event ID
      operationId: get-event-occurrences-by-event-id
      parameters:
        - name: event_id
          in: path
          description: ID of an event
          required: true
          schema:
            type: string
            description: ID of an event
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: List of event occurrences in the database that match the event ID
                items:
                  $ref: '#/components/schemas/EventOccurrence'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/greet/{name}:
    get:
      tags:
        - Examples
      summary: Get a greeting
      description: Returns a personalized greeting message
      operationId: get-greeting
      parameters:
        - name: name
          in: path
          description: Name to greet
          required: true
          schema:
            type: string
            description: Name to greet
            maxLength: 30
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetGreetingOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/health:
    get:
      tags:
        - Health
      summary: Health check
      description: Check if the API is running and healthy
      operationId: health-check
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/locations:
    post:
      tags:
        - Locations
      summary: Create a new location
      description: Creates a new location
      operationId: post-location
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateLocationInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/locations/{id}:
    get:
      tags:
        - Locations
      summary: Get a location by id
      description: Returns a location by id
      operationId: get-location-by-id
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/schools:
    get:
      tags:
        - Schools
      summary: Get all schools
      description: Returns all schools
      operationId: get-all-schools
      parameters:
        - name: page
          in: query
          explode: false
          schema:
            type: integer
            format: int64
            default: 1
            minimum: 1
        - name: limit
          in: query
          explode: false
          schema:
            type: integer
            format: int64
            default: 100
            minimum: 1
            maximum: 100
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                type: array
                description: List of all schools in the database
                items:
                  $ref: '#/components/schemas/School'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/users:
    get:
      tags:
        - Users
      summary: List all users
      description: Returns a list of all registered users
      operationId: list-users
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListUsersOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    post:
      tags:
        - Users
      summary: Create a new user
      description: Creates a new user account with the provided information
      operationId: create-user
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateUserInputBody'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
  /api/v1/users/{id}:
    get:
      tags:
        - Users
      summary: Get user by ID
      description: Returns a single user by their ID
      operationId: get-user
      parameters:
        - name: id
          in: path
          description: User ID
          required: true
          schema:
            type: string
            description: User ID
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserOutputBody'
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
    delete:
      tags:
        - Users
      summary: Delete a user
      description: Deletes a user account by ID
      operationId: delete-user
      parameters:
        - name: id
          in: path
          description: User ID to delete
          required: true
          schema:
            type: string
            description: User ID to delete
      responses:
        "204":
          description: No Content
        default:
          description: Error
          content:
            application/problem+json:
              schema:
                $ref: '#/components/schemas/ErrorModel'
components:
  schemas:
    CreateEventOccurrenceInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/CreateEventOccurrenceInputBody.json
          readOnly: true
        end_time:
          type: string
          description: End time of the event occurrence
          format: date-time
        event_id:
          type: string
          description: ID of an event in the database
        language:
          type: string
          description: Primary language used for the event occurrence
          minLength: 2
          maxLength: 30
        location_id:
          type: string
          description: ID of a location in the database
        manager_id:
          type: string
          description: ID of a manager in the database
        max_attendees:
          type: integer
          description: Maximum number of attendees
          format: int64
          minimum: 1
          maximum: 100
        start_time:
          type: string
          description: Start time of the event occurrence
          format: date-time
      required:
        - manager_id
        - event_id
        - location_id
        - start_time
        - end_time
        - max_attendees
        - language
    CreateLocationInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/CreateLocationInputBody.json
          readOnly: true
        address_line1:
          type: string
          description: Primary address line of the location
          minLength: 5
          maxLength: 200
        address_line2:
          type: string
          description: Secondary address line of the location
          minLength: 5
          maxLength: 200
        country:
          type: string
          description: Country of the location
          minLength: 2
          maxLength: 100
        district:
          type: string
          description: District of the location
          minLength: 2
          maxLength: 100
        latitude:
          type: number
          description: Latitude of the location
          format: double
          minimum: -90
          maximum: 90
        longitude:
          type: number
          description: Longitude of the location
          format: double
          minimum: -180
          maximum: 180
        postal_code:
          type: string
          description: Postal code of the location
          minLength: 3
          maxLength: 20
        province:
          type: string
          description: Province/State of the location
          minLength: 2
          maxLength: 100
        subdistrict:
          type: string
          description: Subdistrict of the location
          minLength: 2
          maxLength: 100
      required:
        - latitude
        - longitude
        - address_line1
        - address_line2
        - subdistrict
        - district
        - province
        - postal_code
        - country
    CreateUserInputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/CreateUserInputBody.json
          readOnly: true
        email:
          type: string
          description: User email address
          format: email
        full_name:
          type: string
          description: Full name (optional)
        username:
          type: string
          description: Username
          minLength: 3
          maxLength: 50
      required:
        - email
        - username
    ErrorDetail:
      type: object
      additionalProperties: false
      properties:
        location:
          type: string
          description: Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'
        message:
          type: string
          description: Error message text
        value:
          description: The value at the given location
    ErrorModel:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/ErrorModel.json
          readOnly: true
        detail:
          type: string
          description: A human-readable explanation specific to this occurrence of the problem.
          examples:
            - Property foo is required but is missing.
        errors:
          type: array
          description: Optional list of individual error details
          items:
            $ref: '#/components/schemas/ErrorDetail'
        instance:
          type: string
          description: A URI reference that identifies the specific occurrence of the problem.
          format: uri
          examples:
            - https://example.com/error-log/abc123
        status:
          type: integer
          description: HTTP status code
          format: int64
          examples:
            - 400
        title:
          type: string
          description: A short, human-readable summary of the problem type. This value should not change between occurrences of the error.
          examples:
            - Bad Request
        type:
          type: string
          description: A URI reference to human-readable documentation for the error.
          format: uri
          default: about:blank
          examples:
            - https://example.com/errors/example
    Event:
      type: object
      additionalProperties: false
      properties:
        AgeRangeMax:
          type: integer
          format: int64
        AgeRangeMin:
          type: integer
          format: int64
        Category:
          type: string
        CreatedAt:
          type: string
          format: date-time
        Description:
          type: string
        HeaderImageS3Key:
          type: string
        ID:
          type: string
        OrganizationId:
          type: string
        Title:
          type: string
        UpdatedAt:
          type: string
          format: date-time
      required:
        - ID
        - Title
        - Description
        - OrganizationId
        - AgeRangeMin
        - AgeRangeMax
        - Category
        - HeaderImageS3Key
        - CreatedAt
        - UpdatedAt
    EventOccurrence:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/EventOccurrence.json
          readOnly: true
        created_at:
          type: string
          format: date-time
        curr_enrolled:
          type: integer
          format: int64
        end_time:
          type: string
          format: date-time
        event:
          $ref: '#/components/schemas/Event'
        id:
          type: string
        language:
          type: string
        location:
          $ref: '#/components/schemas/Location'
        manager_id:
          type: string
        max_attendees:
          type: integer
          format: int64
        start_time:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - manager_id
        - event
        - location
        - start_time
        - end_time
        - max_attendees
        - language
        - curr_enrolled
        - created_at
        - updated_at
    GetGreetingOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/GetGreetingOutputBody.json
          readOnly: true
        message:
          type: string
          description: Greeting message
        timestamp:
          type: string
          description: Server timestamp
      required:
        - message
        - timestamp
    HealthOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/HealthOutputBody.json
          readOnly: true
        status:
          type: string
          description: Health status
          examples:
            - ok
        version:
          type: string
          description: API version
          examples:
            - 1.0.0
      required:
        - status
        - version
    Item:
      type: object
      additionalProperties: false
      properties:
        email:
          type: string
        id:
          type: string
        username:
          type: string
      required:
        - id
        - email
        - username
    ListUsersOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/ListUsersOutputBody.json
          readOnly: true
        total:
          type: integer
          format: int64
        users:
          type: array
          items:
            $ref: '#/components/schemas/Item'
      required:
        - users
        - total
    Location:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/Location.json
          readOnly: true
        address_line1:
          type: string
        address_line2:
          type: string
        country:
          type: string
        created_at:
          type: string
          format: date-time
        district:
          type: string
        id:
          type: string
        latitude:
          type: number
          format: double
        longitude:
          type: number
          format: double
        postal_code:
          type: string
        province:
          type: string
        subdistrict:
          type: string
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - latitude
        - longitude
        - address_line1
        - address_line2
        - subdistrict
        - district
        - province
        - postal_code
        - country
        - created_at
        - updated_at
    School:
      type: object
      additionalProperties: false
      properties:
        created_at:
          type: string
          format: date-time
        id:
          type: string
        location_id:
          type: string
        name:
          type: string
        updated_at:
          type: string
          format: date-time
      required:
        - id
        - name
        - location_id
        - created_at
        - updated_at
    UserOutputBody:
      type: object
      additionalProperties: false
      properties:
        $schema:
          type: string
          description: A URL to the JSON Schema for this object.
          format: uri
          examples:
            - http://localhost:8080/schemas/UserOutputBody.json
          readOnly: true
        email:
          type: string
          description: User email
        full_name:
          type: string
          description: Full name
        id:
          type: string
          description: User ID
        username:
          type: string
          description: Username
      required:
        - id
        - email
        - username
